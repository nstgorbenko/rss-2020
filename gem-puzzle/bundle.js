(()=>{"use strict";var e=["top","right","bottom","left"],t=36e5,n=new Audio("./sound.mp3"),o=function(e){return String(e).padStart(2,"0")},r=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];n.forEach((function(t){return e.append(t.getElement())}))};function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=null}var t,n;return t=e,(n=[{key:"getTemplate",value:function(){throw new Error("Abstract method not implemented: getTemplate.")}},{key:"getElement",value:function(){var e,t,n=this;return null===this.element&&(this.element=(e=this.getTemplate(),(t=document.createElement("div")).innerHTML=e,t.firstChild)),setTimeout((function(){n.getElement().style.opacity=1}),100),this.element}},{key:"removeElement",value:function(){this.element=null}}])&&i(t.prototype,n),e}();function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(l,e);var t,n,o,r,i=(o=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(o);if(r){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return f(this,e)});function l(){return s(this,l),i.apply(this,arguments)}return t=l,(n=[{key:"getTemplate",value:function(){return'<button class="button" type="button">Give up</button>'}},{key:"setClickHandler",value:function(e){this.getElement().addEventListener("click",(function(){e()}))}}])&&a(t.prototype,n),l}(l);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(l,e);var t,n,o,r,i=(o=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(o);if(r){var n=S(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function l(e,t,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(o=i.call(this)).item=e,o.level=t,o.image=n,o.clickHandler=null,o.mousedownHandler=null,o.dragStartHandler=o.dragStartHandler.bind(_(o)),o.dragEndHandler=o.dragEndHandler.bind(_(o)),o}return t=l,(n=[{key:"getTemplate",value:function(){return e=this.item,t=this.level,n=this.image,o=e.row,r=e.column,u=(l=null===(i=e.value))?"field__cell--empty":"",a=r*(s=Number((100/t).toFixed(2))),c=o*s,f=(i-1)%t/(t-1)*100,p=Math.trunc((i-1)/t)/(t-1)*100,"<div class='field__cell ".concat(u,"' style='\n      top: ").concat(c,"%;\n      left: ").concat(a,"%;\n      width: ").concat(s,"%;\n      height: ").concat(s,"%;\n      ").concat(l?"":"background-image: url(".concat(n,");"),"\n      background-repeat: no-repeat;\n      background-size: ").concat(100*t,"%;\n      background-position: ").concat(f,"% ").concat(p,"%;'\n    ></div>");var e,t,n,o,r,i,l,u,s,a,c,f,p}},{key:"setClickHandler",value:function(e){var t=this;this.clickHandler=e,this.getElement().addEventListener("click",(function(){e(t)}))}},{key:"setMouseDownHandler",value:function(e){var t=this;this.mousedownHandler=e,this.getElement().addEventListener("mousedown",(function(){e(t)}))}},{key:"getValue",value:function(){return this.item}},{key:"update",value:function(e){this.item=d(d({},this.item),e),this.rerender()}},{key:"rerender",value:function(){var e=this.getElement();this.removeElement(),e.replaceWith(this.getElement()),this.recoveryListeners()}},{key:"recoveryListeners",value:function(){this.setClickHandler(this.clickHandler),this.setMouseDownHandler(this.mousedownHandler)}},{key:"dragStartHandler",value:function(){var e=this;setTimeout((function(){e.getElement().classList.add("hide")}),0)}},{key:"dragEndHandler",value:function(){this.getElement().classList.remove("hide"),this.unsetDragProps()}},{key:"setDragProps",value:function(){this.getElement().draggable="true",this.getElement().addEventListener("dragstart",this.dragStartHandler),this.getElement().addEventListener("dragend",this.dragEndHandler)}},{key:"unsetDragProps",value:function(){this.getElement().draggable="",this.getElement().removeEventListener("dragstart",this.dragStartHandler),this.getElement().removeEventListener("dragend",this.dragEndHandler)}},{key:"setDropProps",value:function(e){var t=this;this.getElement().addEventListener("dragover",(function(e){e.preventDefault()})),this.getElement().addEventListener("drop",(function(){e(t)}))}}])&&b(t.prototype,n),l}(l);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(l,e);var t,n,o,r,i=(o=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(o);if(r){var n=P(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return j(this,e)});function l(){return k(this,l),i.apply(this,arguments)}return t=l,(n=[{key:"getTemplate",value:function(){return'<div class="field"></div>'}}])&&E(t.prototype,n),l}(l);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(l,e);var t,n,o,r,i=(o=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(o);if(r){var n=x(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return L(this,e)});function l(){return T(this,l),i.apply(this,arguments)}return t=l,(n=[{key:"getTemplate",value:function(){return'<div class="footer"></div>'}}])&&H(t.prototype,n),l}(l);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e,t){return!t||"object"!==A(t)&&"function"!=typeof t?q(e):t}function q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(l,e);var t,n,o,r,i=(o=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=G(o);if(r){var n=G(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return W(this,e)});function l(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=i.call(this)).hide=e.hide.bind(q(e)),e.subscribeOnEvents(),e}return t=l,(n=[{key:"getTemplate",value:function(){return'<div class="message">\n      <div class="message__wrapper">\n        <p class="message__title">Hooray!</p>\n        <p class="message__text">You solved the puzzle in 01:15 and 24 moves!</p>\n        <button class="message__button" type="button">Close</button>\n      </div>\n    </div>'}},{key:"show",value:function(e,t){this.updateMessage(e,t),this.getElement().classList.add("message--show")}},{key:"hide",value:function(){this.getElement().classList.remove("message--show")}},{key:"updateMessage",value:function(e,t){this.getElement().querySelector(".message__text").textContent="You solved the puzzle in ".concat(e," and ").concat(t," moves!")}},{key:"subscribeOnEvents",value:function(){this.getElement().querySelector(".message__button").addEventListener("click",this.hide)}}])&&V(t.prototype,n),l}(l);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(l,e);var t,n,o,r,i=(o=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=K(o);if(r){var n=K(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return $(this,e)});function l(){return B(this,l),i.apply(this,arguments)}return t=l,(n=[{key:"getTemplate",value:function(){return'<div class="info__moves">Moves: 0</div>'}},{key:"update",value:function(e){this.getElement().textContent="Moves: ".concat(e)}}])&&U(t.prototype,n),l}(l);function X(e){return(X="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e,t){return!t||"object"!==X(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(l,e);var t,n,o,r,i=(o=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=oe(o);if(r){var n=oe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ne(this,e)});function l(){return Z(this,l),i.apply(this,arguments)}return t=l,(n=[{key:"getTemplate",value:function(){return'<div class="info"></div>'}}])&&ee(t.prototype,n),l}(l);function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function se(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(s,e);var n,r,i,l,u=(i=s,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ae(i);if(l){var n=ae(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return se(this,e)});function s(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(e=u.call(this)).timer=null,e.duration=null,e}return n=s,(r=[{key:"getTemplate",value:function(){return'<div class="info__time">Time: 00:00:00</div>'}},{key:"update",value:function(e){var n=this;!function r(){n.duration=function(e){var n=new Date-e,r=Math.floor(n/t),i=Math.floor(n%t/6e4),l=Math.floor(n%t%6e4/1e3);return"".concat(o(r),":").concat(o(i),":").concat(o(l))}(e),n.getElement().textContent="Time: ".concat(n.duration),n.timer=setTimeout(r,1e3)}()}},{key:"getTime",value:function(){return clearTimeout(this.timer),this.duration}},{key:"stopTime",value:function(){clearTimeout(this.timer)}}])&&le(n.prototype,r),s}(l);function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function he(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ve(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var me=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(l,e);var t,n,o,r,i=(o=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=de(o);if(r){var n=de(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ve(this,e)});function l(){return pe(this,l),i.apply(this,arguments)}return t=l,(n=[{key:"getTemplate",value:function(){return'<button class="button" type="button">Restart</button>'}},{key:"setClickHandler",value:function(e){this.getElement().addEventListener("click",(function(){e()}))}}])&&he(t.prototype,n),l}(l);function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function we(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Se(e,t){return!t||"object"!==be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(l,e);var t,n,o,r,i=(o=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ce(o);if(r){var n=Ce(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Se(this,e)});function l(){return ge(this,l),i.apply(this,arguments)}return t=l,(n=[{key:"getTemplate",value:function(){return'<button class="button" type="button">Save</button>'}},{key:"setClickHandler",value:function(e){this.getElement().addEventListener("click",(function(){e()}))}}])&&we(t.prototype,n),l}(l);function ke(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Ee=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.puzzleModel=n,this.puzzleContainer=null,this.level=4,this.image=null,this.startTime=null,this.time=null,this.movesCount=null,this.isSound=!1,this.cellComponents=[],this.isFailed=!1,this.isWon=!1,this.emptyCellComponent=null,this.activeCellComponent=null,this.puzzleTimeComponent=null,this.puzzleMovesComponent=null,this.settingsComponent=null,this.puzzleMessageComponent=null,this.makeMove=this.makeMove.bind(this),this.dragAndDrop=this.dragAndDrop.bind(this),this.saveGame=this.saveGame.bind(this),this.restartGame=this.restartGame.bind(this),this.showDecision=this.showDecision.bind(this),this.swapSells=this.swapSells.bind(this),this.soundModeChangeHandler=this.soundModeChangeHandler.bind(this),this.levelModeChangeHandler=this.levelModeChangeHandler.bind(this),this.puzzleModel.addSoundModeChangeHandler(this.soundModeChangeHandler),this.puzzleModel.addLevelModeChangeHandler(this.levelModeChangeHandler)}var t,o;return t=e,(o=[{key:"render",value:function(){this.puzzleMessageComponent=new F,r(this.container,this.puzzleMessageComponent),this.puzzleContainer=document.createElement("div"),this.puzzleContainer.classList.add("wrapper"),this.container.append(this.puzzleContainer),this.rerender()}},{key:"rerender",value:function(){this.startTime=new Date,this.movesCount=0,this.isFailed=!1,this.isWon=!1,this.puzzleContainer.innerHTML="",this.renderPuzzleStats(),this.renderPuzzleField(),this.renderPuzzleMenu()}},{key:"renderPuzzleStats",value:function(){var e=new re;this.puzzleTimeComponent=new ce,this.puzzleMovesComponent=new Q,r(e.getElement(),this.puzzleTimeComponent,this.puzzleMovesComponent),r(this.puzzleContainer,e),this.puzzleTimeComponent.update(this.startTime),this.puzzleMovesComponent.update(this.movesCount)}},{key:"renderPuzzleField",value:function(){var e=this,t=this.puzzleModel.get(),n=t.cells,o=t.image,i=t.level;this.image=o,this.level=i,this.cellComponents=[];var l=new M;n.forEach((function(t){var n=new C(t,e.level,e.image);e.cellComponents.push(n),n.setClickHandler(e.makeMove),n.setMouseDownHandler(e.dragAndDrop),null===t.value&&(e.emptyCellComponent=n),r(l.getElement(),n)})),r(this.puzzleContainer,l)}},{key:"renderPuzzleMenu",value:function(){var e=new I,t=new me,n=new h,o=new Oe;t.setClickHandler(this.restartGame),n.setClickHandler(this.showDecision),o.setClickHandler(this.saveGame),r(e.getElement(),t,n,o),r(this.puzzleContainer,e)}},{key:"makeMove",value:function(e){var t=this.emptyCellComponent.getValue(),n=t.row,o=t.column,r=e.getValue(),i=r.row,l=r.column;if(!(Math.abs(n-i)+Math.abs(o-l)>1||e===this.emptyCellComponent)){this.makeSound();var u={row:n,column:o};this.emptyCellComponent.update({row:i,column:l}),e.update(u),this.movesCount+=1,this.puzzleMovesComponent.update(this.movesCount),this.puzzleModel.update(this.emptyCellComponent.getValue(),e.getValue()),this.checkWinning()}}},{key:"dragAndDrop",value:function(e){var t=this.emptyCellComponent.getValue(),n=t.row,o=t.column,r=e.getValue(),i=r.row,l=r.column;Math.abs(n-i)+Math.abs(o-l)>1||e===this.emptyCellComponent||(this.activeCellComponent=e,e.setDragProps(),this.emptyCellComponent.setDropProps(this.swapSells))}},{key:"swapSells",value:function(e){var t=e.getValue(),n=t.row,o=t.column,r=this.activeCellComponent.getValue(),i=r.row,l=r.column;this.makeSound();var u={row:n,column:o};e.update({row:i,column:l}),this.activeCellComponent.update(u),this.movesCount+=1,this.puzzleMovesComponent.update(this.movesCount),this.puzzleModel.update(e.getValue(),this.activeCellComponent.getValue()),this.checkWinning()}},{key:"saveGame",value:function(){var e=this.puzzleModel.getCurrentState();localStorage.setItem("cells",JSON.stringify(e));var t=this.puzzleModel.getMoves();localStorage.setItem("moves",JSON.stringify(t))}},{key:"restartGame",value:function(){this.puzzleModel.resetCurrentState(),this.rerender()}},{key:"soundModeChangeHandler",value:function(){this.isSound=!this.isSound}},{key:"levelModeChangeHandler",value:function(){this.rerender()}},{key:"makeSound",value:function(){this.isSound&&n.play()}},{key:"checkWinning",value:function(){var e=this;this.isWon||this.puzzleModel.getCurrentState().filter((function(e){return null!==e.value})).every((function(t){var n=t.row,o=t.column;return t.value===n*e.level+o+1}))&&(this.isWon=!0,this.time=this.puzzleTimeComponent.getTime(),this.puzzleMessageComponent.show(this.time,this.movesCount),this.saveWinningInfo({moves:this.movesCount,time:this.time,level:this.level}))}},{key:"saveWinningInfo",value:function(e){var t=JSON.parse(localStorage.getItem("wins"))||[];t.push(e);var n=t.sort((function(e,t){return e.moves-t.moves})).slice(0,10);localStorage.setItem("wins",JSON.stringify(n))}},{key:"showDecision",value:function(){var e=this;if(!this.isFailed){this.isFailed=!0,this.puzzleTimeComponent.stopTime();for(var t=this.puzzleModel.getMoves().reverse(),n=function(n){setTimeout((function(){var o=t[n],r=e.cellComponents.find((function(e){return e.getValue().value===o[0].value})),i=e.cellComponents.find((function(e){return e.getValue().value===o[1].value})),l=r.getValue(),u=l.row,s=l.column,a=i.getValue(),c=a.row,f=a.column,p={row:u,column:s};e.makeSound(),r.update({row:c,column:f}),i.update(p)}),200*(n+1))},o=0;o<t.length;o+=1)n(o)}}}])&&ke(t.prototype,o),e}();function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Me(e,t){return!t||"object"!==ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(l,e);var t,n,o,r,i=(o=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Re(o);if(r){var n=Re(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Me(this,e)});function l(e){var t,n=e.moves,o=e.time,r=e.level;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this)).moves=n,t.time=o,t.level=r,t}return t=l,(n=[{key:"getTemplate",value:function(){return t=(e={moves:this.moves,time:this.time,level:this.level}).time,n=e.level,'<div class="stats__row">\n      <div class="stats__cell">'.concat(e.moves,'</div>\n      <div class="stats__cell">').concat(t,'</div>\n      <div class="stats__cell">').concat(n," * ").concat(n,"</div>\n    </div>");var e,t,n}}])&&je(t.prototype,n),l}(l);function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function De(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?Ie(e):t}function Ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(l,e);var t,n,o,r,i=(o=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ae(o);if(r){var n=Ae(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return xe(this,e)});function l(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=i.call(this)).isLoud=!1,e.hide=e.hide.bind(Ie(e)),e.showStats=e.showStats.bind(Ie(e)),e.hideStats=e.hideStats.bind(Ie(e)),e.subscribeOnEvents(),e}return t=l,(n=[{key:"getTemplate",value:function(){return'<div class="settings">\n      <div class="settings__wrapper">\n        <button class="settings__item-label settings__item-label--wide back-to-game" type="button">Back to game</button>\n        <div class="settings__part">\n          <p class="settings__name">New Game</p>\n          <ul class="settings__list settings__list--level">\n            <li class="settings__item">\n              <input class="settings__item-input visually-hidden" type="radio" name="level" value="3" id="level-3">\n              <label class="settings__item-label" for="level-3">3 * 3</label>\n            </li>\n            <li class="settings__item">\n              <input class="settings__item-input visually-hidden" type="radio" name="level" value="4" id="level-4" checked>\n              <label class="settings__item-label" for="level-4">4 * 4</label>\n            </li>\n            <li class="settings__item">\n              <input class="settings__item-input visually-hidden" type="radio" name="level" value="5" id="level-5">\n              <label class="settings__item-label" for="level-5">5 * 5</label>\n            </li>\n            <li class="settings__item">\n              <input class="settings__item-input visually-hidden" type="radio" name="level" value="6" id="level-6">\n              <label class="settings__item-label" for="level-6">6 * 6</label>\n            </li>\n            <li class="settings__item">\n              <input class="settings__item-input visually-hidden" type="radio" name="level" value="7" id="level-7">\n              <label class="settings__item-label" for="level-7">7 * 7</label>\n            </li>\n            <li class="settings__item">\n              <input class="settings__item-input visually-hidden" type="radio" name="level" value="8" id="level-8">\n              <label class="settings__item-label" for="level-8">8 * 8</label>\n            </li>\n          </ul>\n        </div>\n        <div class="settings__part">\n          <p class="settings__name">Sound</p>\n          <ul class="settings__list settings__list--audio">\n            <li class="settings__item">\n              <input class="settings__item-input visually-hidden" type="radio" name="sound" value="on" id="sound-on">\n              <label class="settings__item-label" for="sound-on">On</label>\n            </li>\n            <li class="settings__item">\n              <input class="settings__item-input visually-hidden" type="radio" name="sound" value="off" id="sound-off" checked>\n              <label class="settings__item-label" for="sound-off">Off</label>\n            </li>\n          </ul>\n        </div>\n        <div class="settings__part">\n          <p class="settings__name">Statistics</p>\n          <button class="settings__item-label settings__item-label--wide show-stats" type="button">Show</button>\n          <div class="stats">\n            <div class="stats__row stats__row--header">\n              <div class="stats__cell">Moves</div>\n              <div class="stats__cell">Time</div>\n              <div class="stats__cell">Level</div>\n            </div>\n            <div class="stats__body">\n            </div>\n            <button class="settings__item-label settings__item-label--wide back-to-stats">Back</button>\n          </div>\n        </div>\n      </div>\n    </div>'}},{key:"show",value:function(){this.getElement().classList.add("settings--show")}},{key:"hide",value:function(){this.getElement().classList.remove("settings--show")}},{key:"showStats",value:function(){this.getElement().querySelector(".stats").classList.add("stats--show")}},{key:"hideStats",value:function(){this.getElement().querySelector(".stats").classList.remove("stats--show")}},{key:"subscribeOnEvents",value:function(){this.getElement().querySelector(".back-to-game").addEventListener("click",this.hide),this.getElement().querySelector(".back-to-stats").addEventListener("click",this.hideStats)}},{key:"setChangeSoundHandler",value:function(e){var t=this;this.getElement().querySelector(".settings__list--audio").addEventListener("change",(function(n){t.isLoud="on"===n.target.value,e(t.isLoud)}))}},{key:"setChangeLevelHandler",value:function(e){this.getElement().querySelector(".settings__list--level").addEventListener("click",(function(t){"INPUT"===t.target.tagName&&e(Number(t.target.value))}))}},{key:"setStatsClickHandler",value:function(e){this.getElement().querySelector(".show-stats").addEventListener("click",(function(){e()}))}},{key:"renderStats",value:function(e){var t=this.getElement().querySelector(".stats__body");t.innerHTML="",e.forEach((function(e){return t.append(new Te(e).getElement())})),this.showStats()}}])&&De(t.prototype,n),l}(l);function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e,t){return!t||"object"!==Ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(l,e);var t,n,o,r,i=(o=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Je(o);if(r){var n=Je(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Fe(this,e)});function l(){return We(this,l),i.apply(this,arguments)}return t=l,(n=[{key:"getTemplate",value:function(){return'<button class="button" type="button">Settings</button>'}},{key:"setClickHandler",value:function(e){this.getElement().addEventListener("click",(function(){e()}))}}])&&qe(t.prototype,n),l}(l);function Ue(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var Ye=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.puzzleModel=n,this.settingsButtonComponent=null,this.puzzleSettingsComponent=null,this.show=this.show.bind(this),this.soundChangeHandler=this.soundChangeHandler.bind(this),this.levelChangeHandler=this.levelChangeHandler.bind(this),this.statsClickChangeHandler=this.statsClickChangeHandler.bind(this)}var t,n;return t=e,(n=[{key:"render",value:function(){this.settingsButtonComponent=new Be,this.puzzleSettingsComponent=new Ve,this.settingsButtonComponent.setClickHandler(this.show),this.puzzleSettingsComponent.setChangeSoundHandler(this.soundChangeHandler),this.puzzleSettingsComponent.setChangeLevelHandler(this.levelChangeHandler),this.puzzleSettingsComponent.setStatsClickHandler(this.statsClickChangeHandler),r(this.container,this.settingsButtonComponent,this.puzzleSettingsComponent)}},{key:"show",value:function(){this.puzzleSettingsComponent.show()}},{key:"soundChangeHandler",value:function(e){this.puzzleModel.setSoundMode(e)}},{key:"levelChangeHandler",value:function(e){this.puzzleModel.setLevel(e),this.puzzleSettingsComponent.hide()}},{key:"statsClickChangeHandler",value:function(){var e=this.puzzleModel.getStats()||[];this.puzzleSettingsComponent.renderStats(e)}}])&&Ue(t.prototype,n),e}();function $e(e){return function(e){if(Array.isArray(e))return Xe(e)}(e)||Qe(e)||Ke(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ke(e,t){if(e){if("string"==typeof e)return Xe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xe(e,t):void 0}}function Qe(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function Xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Ze(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var et=function(){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.initialCells=[],this.currentCells=[],this.level=4,this.image="./img/1.jpg",this.initialMoves=[],this.currentMoves=[],this.soundModeChangeHandlers=[],this.levelChangeHandlers=[]}var n,o,r;return n=t,r=[{key:"callHandlers",value:function(e){e.forEach((function(e){return e()}))}}],(o=[{key:"get",value:function(){return this.currentMoves=[],null!==localStorage.getItem("cells")?(this.initialCells=JSON.parse(localStorage.getItem("cells")),this.initialMoves=JSON.parse(localStorage.getItem("moves"))):0===this.initialCells.length&&(this.initialCells=this.generateCellsOrder()),this.currentCells=this.initialCells,{cells:this.initialCells,image:this.image,level:this.level}}},{key:"getCurrentState",value:function(){return this.currentCells}},{key:"resetCurrentState",value:function(){localStorage.removeItem("cells")}},{key:"setNewState",value:function(){localStorage.removeItem("cells"),this.image="./img/".concat(Math.ceil(50*Math.random()),".jpg"),this.initialMoves=[],this.currentMoves=[],this.initialCells=this.generateCellsOrder(),this.currentCells=this.initialCells}},{key:"update",value:function(){for(var e=this,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];n.forEach((function(t){var n=e.currentCells.findIndex((function(e){return e.value===t.value}));e.currentCells=[].concat($e(e.currentCells.slice(0,n)),[t],$e(e.currentCells.slice(n+1)))})),this.currentMoves.push([].concat(n))}},{key:"generateCellsOrder",value:function(){var e=this.generateWinningList();return this.randomizeOrder(e)}},{key:"generateWinningList",value:function(){for(var e=[],t=0;t<this.level*this.level;t+=1)e.push({row:Math.trunc(t/this.level),column:t%this.level,value:t===this.level*this.level-1?null:t+1});return e}},{key:"randomizeOrder",value:function(t){for(var n=(a=t,function(e){if(Array.isArray(e))return e}(a)||Qe(a)||Ke(a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).slice(0),o=n[n.length-1],r=0;r<250;r+=1)switch(e[Math.floor(4*Math.random())]){case"top":if(0!==o.row){var i=n.find((function(e){var t=e.row,n=e.column;return t===o.row-1&&n===o.column}));i.row+=1,o.row-=1,this.saveMove([i,o])}break;case"right":if(o.column!==this.level-1){var l=n.find((function(e){var t=e.row,n=e.column;return t===o.row&&n===o.column+1}));l.column-=1,o.column+=1,this.saveMove([l,o])}break;case"bottom":if(o.row!==this.level-1){var u=n.find((function(e){var t=e.row,n=e.column;return t===o.row+1&&n===o.column}));u.row-=1,o.row+=1,this.saveMove([u,o])}break;case"left":if(0!==o.column){var s=n.find((function(e){var t=e.row,n=e.column;return t===o.row&&n===o.column-1}));s.column+=1,o.column-=1,this.saveMove([s,o])}break;default:throw new Error("Unknown move direction")}var a;return n}},{key:"saveMove",value:function(e){this.initialMoves.push(e)}},{key:"getMoves",value:function(){return[].concat($e(this.initialMoves),$e(this.currentMoves))}},{key:"setSoundMode",value:function(e){this.isLoudMode=e,t.callHandlers(this.soundModeChangeHandlers)}},{key:"setLevel",value:function(e){this.level=e,this.setNewState(),t.callHandlers(this.levelChangeHandlers)}},{key:"addSoundModeChangeHandler",value:function(e){this.soundModeChangeHandlers.push(e)}},{key:"addLevelModeChangeHandler",value:function(e){this.levelChangeHandlers.push(e)}},{key:"getStats",value:function(){return JSON.parse(localStorage.getItem("wins"))}}])&&Ze(n.prototype,o),r&&Ze(n,r),t}(),tt=document.querySelector("body"),nt=new et,ot=new Ee(tt,nt),rt=new Ye(tt,nt);ot.render(),rt.render()})();